!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=12)}([function(t,e){t.exports=PIXI},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(i(0)),o=a(i(5)),n=i(4),h=a(i(6)),l=a(i(7)),c=a(i(8)),m={ALPHA:1,ALPHA_INVERTED:2,LUMA:3,LUMA_INVERTED:4};class d extends r.Graphics{constructor(t){super(),this.finder=new h.default,t&&(this.name=t.nm,this.referenceId=t.refId,this.type=t.ty,this.isCompleted=t.completed,this.index=t.ind,this.hasParent=Object.prototype.hasOwnProperty.call(t,"parent"),this.parentIndex=t.parent,this.inFrame=t.ip,this.outFrame=t.op,this.stretch=t.sr||1,this.startTime=t.st,this.hasMask=t.hasMask,this.setupProperties(t.ks),this.blendMode=d.toPIXIBlendMode(t.bm),t.bmPIXI&&(this.blendMode=t.bmPIXI),t.tt?(this.hasTrackMatteType=!0,this.trackMatteType=t.tt):t.td&&(this.isTrackMatteData=!0),this.player=new l.default(0,0,this.outFrame,t=>{this.updateWithFrameBySelfPlayer(t)},()=>{this.emit("completed",this)}),this.deltaPlayer=new c.default(0,0,this.outFrame,t=>{this.updateWithFrameBySelfPlayer(t)},()=>{this.emit("completed",this)}),t.masksProperties&&(this.masksProperties=t.masksProperties),t.events&&Object.keys(t.events).forEach(e=>{this.isInteractiveEvent(e)&&(this.interactive=!0),this.on(e,t.events[e])}))}static toPIXIBlendMode(t){switch(t){case 0:return r.BLEND_MODES.NORMAL;case 1:return r.BLEND_MODES.MULTIPLY;case 2:return r.BLEND_MODES.SCREEN;case 3:return r.BLEND_MODES.OVERLAY;case 4:return r.BLEND_MODES.DARKEN;case 5:return r.BLEND_MODES.LIGHTEN;case 6:return r.BLEND_MODES.COLOR_DODGE;case 7:return r.BLEND_MODES.COLOR_BURN;case 8:return r.BLEND_MODES.HARD_LIGHT;case 9:return r.BLEND_MODES.SOFT_LIGHT;case 10:return r.BLEND_MODES.DIFFERENCE;case 11:return r.BLEND_MODES.EXCLUSION;case 12:return r.BLEND_MODES.HUE;case 13:return r.BLEND_MODES.SATURATION;case 14:return r.BLEND_MODES.COLOR;case 15:return r.BLEND_MODES.LUMINOSITY}return r.BLEND_MODES.NORMAL}__root(t){return t instanceof n.AfterEffects?t:t.parent?this.__root(t.parent):null}root(){return this.__root(this)}addChild(...t){const e=super.addChild(...t);return this.isInvertedMask&&t.forEach(t=>{t.isInvertedMask=!0}),e}isInvertTrackMatteType(){return this.trackMatteType===m.ALPHA_INVERTED||this.trackMatteType===m.LUMA_INVERTED}set frameRate(t){this.player&&(this.player.frameRate=t),this.deltaPlayer&&(this.deltaPlayer.frameRate=t)}set opt(t){Object.keys(t).forEach(e=>{this[e]=t[e]})}isInteractiveEvent(t){if(!this.interactiveEventMap){const t=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","pointercancel","pointerdown","pointermove","pointerout","pointerover","pointertap","pointerup","pointerupoutside","removed","rightclick","rightdown","rightup","rightupoutside","tap","touchcancel","touchend","touchendoutside","touchmove","touchstart"];this.interactiveEventMap={},t.forEach(t=>{this.interactiveEventMap[t]=!0})}return this.interactiveEventMap[t]}find(t){return this.finder.findByName(t,this)}isCompType(){return 0===this.type}isImageType(){return 2===this.type}setupProperties(t){t&&(this.setupPosition(t.p),this.setupAnchorPoint(t.a),this.setupOpacity(t.o),this.setupRotation(t.r),this.setupScale(t.s))}updateAnimationFrameByBaseFrame(t){if(this.hasAnimatedAnchorPoint&&this.animatedAnchorPoints.forEach(e=>{e.startFrame+=t,e.endFrame+=t}),this.hasAnimatedOpacity&&this.animatedOpacities.forEach(e=>{e.startFrame+=t,e.endFrame+=t}),this.hasAnimatedPosition&&this.animatedPositions.forEach(e=>{e.startFrame+=t,e.endFrame+=t}),this.hasAnimatedSeparatedPosition){const e=this.animatedPositions;e.x.forEach(e=>{e.startFrame+=t,e.endFrame+=t}),e.y.forEach(e=>{e.startFrame+=t,e.endFrame+=t})}this.hasAnimatedRotation&&this.animatedRotations.forEach(e=>{e.startFrame+=t,e.endFrame+=t}),this.hasAnimatedScale&&this.animatedScales.forEach(e=>{e.startFrame+=t,e.endFrame+=t})}setupAnchorPoint(t){const e=d.createAnchorPoint(t);e.length>0?(this.hasAnimatedAnchorPoint=!0,this.animatedAnchorPoints=e):this.pivot=e}static createAnchorPoint(t){if("number"==typeof t.k[0]){const e=t.k;return new r.Point(e[0],e[1])}return d.createAnimatedAnchorPoint(t.k)}static createAnchorPointEasing(t){return t.i&&t.o?o.default(t.o.x,t.o.y,t.i.x,t.i.y):t=>t}static createAnimatedAnchorPoint(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createAnchorPointEasing(i),fromAnchorPoint:i.s,toAnchorPoint:i.e}})}setupOpacity(t){const e=d.createOpacity(t);e.length>0?(this.hasAnimatedOpacity=!0,this.animatedOpacities=e):this.alpha=e}static createOpacity(t){const e=t.k;return"number"==typeof e?e/100:d.createAnimatedOpacity(t.k)}static createOpacityEasing(t){return t.i&&t.o?o.default(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0]):t=>t}static createAnimatedOpacity(t){const e=t.length-1;return t.map((i,s)=>{let a,r;return i.s&&i.e?(a=i.s[0],r=i.e[0]):i.s&&!i.e&&(r=a=i.s[0]),{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createOpacityEasing(i),fromOpacity:void 0!==a?a/100:void 0,toOpacity:void 0!==r?r/100:void 0}})}setupPosition(t){const e=d.createPosition(t),i=e,s=e;i.x&&i.y&&i.x.length>0&&i.y.length>0?(this.hasAnimatedSeparatedPosition=!0,this.animatedPositions=e):s.length>0?(this.hasAnimatedPosition=!0,this.animatedPositions=e):this.position=e}static createPosition(t){const e=t;if(!e.k&&t.x&&t.y){if("number"==typeof t.x.k)return new r.Point(e.x.k,e.y.k);const i=t;return{x:d.createAnimatedSeparatedPosition(i.x.k),y:d.createAnimatedSeparatedPosition(i.y.k)}}if("number"==typeof e.k[0]){const t=e.k;return new r.Point(t[0],t[1])}return d.createAnimatedPosition(e.k)}static createSeparatedPositionEasing(t){return t.i&&t.o?o.default(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0]):t=>t}static createAnimatedSeparatedPosition(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createSeparatedPositionEasing(i),fromPosition:i.s?i.s[0]:void 0,toPosition:i.e?i.e[0]:void 0}})}static createPositionEasing(t){return t.i&&t.o?"number"==typeof t.i.x?(t=t,o.default(t.o.x,t.o.y,t.i.x,t.i.y)):(t=t,o.default(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0])):t=>t}static createAnimatedPosition(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createPositionEasing(i),fromPosition:i.s,toPosition:i.e?i.e:i.s}})}setupRotation(t){if(!t)return;const e=d.createRotation(t);e.length>0?(this.hasAnimatedRotation=!0,this.animatedRotations=e):this.rotation=e}static createRotation(t){const e=t.k;return"number"==typeof e?Math.PI*e/180:d.createAnimatedRotation(t.k)}static createRotationEasing(t){return t.i&&t.o?o.default(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0]):t=>t}static createAnimatedRotation(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createRotationEasing(i),fromRotation:i.s?Math.PI*i.s[0]/180:void 0,toRotation:i.e?Math.PI*i.e[0]/180:void 0}})}setupScale(t){const e=d.createScale(t);if(e.length>0)this.hasAnimatedScale=!0,this.animatedScales=e;else{const t=e;this.scaleX=t.x,this.scaleY=t.y,this.scale=t}}static createScale(t){const e=t.k;if("number"==typeof e[0]){const t=e,i=t[0]/100,s=t[1]/100;return new r.Point(i,s)}return d.createAnimatedScale(t.k)}static createScaleEasing(t){return t.i&&t.o?o.default(t.o.x[0],t.o.y[1],t.i.x[0],t.i.y[1]):t=>t}static createAnimatedScale(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:d.createScaleEasing(i),fromScale:i.s,toScale:i.e?i.e:i.s}})}animateAnchorPoint(t){let e=!1;if(t<this.animatedAnchorPoints[0].startFrame){const t=this.animatedAnchorPoints[0].fromAnchorPoint;t&&(this.pivot=new r.Point(t[0],t[1]))}if(this.animatedAnchorPoints.some(i=>{if(i.startFrame===i.endFrame)return!1;if(i.startFrame<=t&&t<=i.endFrame){if(void 0===i.toAnchorPoint)return!1;if(void 0===i.fromAnchorPoint)return!1;const s=i.toAnchorPoint[0]-i.fromAnchorPoint[0],a=i.toAnchorPoint[1]-i.fromAnchorPoint[1],o=i.endFrame-i.startFrame,n=1*(t-i.startFrame)/o,h=i.easing(n),l=h*s+i.fromAnchorPoint[0],c=h*a+i.fromAnchorPoint[1];return this.pivot=new r.Point(l,c),e=!0,!0}return!1}),!e&&t>this.animatedAnchorPoints[this.animatedAnchorPoints.length-1].endFrame){const t=this.animatedAnchorPoints[this.animatedAnchorPoints.length-2].toAnchorPoint;t&&(this.pivot=new r.Point(t[0],t[1]))}return e}animateOpacity(t){let e=!1;if(t<this.animatedOpacities[0].startFrame){const t=this.animatedOpacities[0].fromOpacity;void 0!==t&&(this.alpha=t)}if(this.animatedOpacities.some(i=>{if(i.startFrame===i.endFrame)return!1;if(i.startFrame<=t&&t<=i.endFrame){if(void 0===i.toOpacity)return!1;if(void 0===i.fromOpacity)return!1;const s=i.toOpacity-i.fromOpacity,a=i.endFrame-i.startFrame,r=1*(t-i.startFrame)/a,o=s*i.easing(r)+i.fromOpacity;return this.alpha=o,e=!0,!0}return!1}),!e&&t>this.animatedOpacities[this.animatedOpacities.length-1].endFrame){const t=this.animatedOpacities[this.animatedOpacities.length-2].toOpacity;void 0!==t&&(this.alpha=t)}return e}animatePosition(t){let e=!1;const i=this.animatedPositions;if(t<i[0].startFrame){const t=i[0].fromPosition;t&&(this.position=new r.Point(t[0],t[1]))}if(i.some(i=>{if(i.startFrame===i.endFrame)return!1;if(i.startFrame<=t&&t<=i.endFrame){if(void 0===i.toPosition)return!1;if(void 0===i.fromPosition)return!1;const s=i.toPosition[0]-i.fromPosition[0],a=i.toPosition[1]-i.fromPosition[1],r=i.endFrame-i.startFrame,o=1*(t-i.startFrame)/r,n=i.easing(o),h=s*n,l=a*n;return this.x=i.fromPosition[0]+h,this.y=i.fromPosition[1]+l,e=!0,!0}return!1}),!e&&t>i[i.length-1].endFrame){const t=i[i.length-2].toPosition;t&&(this.position=new r.Point(t[0],t[1]))}return e}animateSeparatedPosition(t){const e=this.animatedPositions,i=e.x,s=e.y;if(t<i[0].startFrame&&(this.x=i[0].fromPosition||0),t<s[0].startFrame&&(this.y=s[0].fromPosition||0),i.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(void 0===e.toPosition)return!1;if(void 0===e.fromPosition)return!1;const i=e.toPosition-e.fromPosition,s=e.endFrame-e.startFrame,a=1*(t-e.startFrame)/s,r=e.easing(a);return this.x=i*r+e.fromPosition,!0}return!1}),s.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(void 0===e.toPosition)return!1;if(void 0===e.fromPosition)return!1;const i=e.toPosition-e.fromPosition,s=e.endFrame-e.startFrame,a=1*(t-e.startFrame)/s,r=e.easing(a);return this.y=i*r+e.fromPosition,!0}return!1}),t>i[i.length-1].endFrame){const t=i[i.length-2].toPosition,e=s[s.length-2].toPosition;this.position=new r.Point(t,e)}}animateRotation(t){let e=!1;if(t<this.animatedRotations[0].startFrame){const t=this.animatedRotations[0].fromRotation;void 0!==t&&(this.rotation=t)}if(this.animatedRotations.some(i=>{if(i.startFrame===i.endFrame)return!1;if(i.startFrame<=t&&t<=i.endFrame){if(void 0===i.toRotation)return!1;if(void 0===i.fromRotation)return!1;const s=i.toRotation-i.fromRotation,a=i.endFrame-i.startFrame,r=1*(t-i.startFrame)/a,o=i.easing(r);return this.rotation=s*o+i.fromRotation,e=!0,!0}return!1}),!e&&t>this.animatedRotations[this.animatedRotations.length-1].endFrame){const t=this.animatedRotations[this.animatedRotations.length-2].toRotation;void 0!==t&&(this.rotation=t)}return e}animateScale(t){let e=!1;if(t<this.animatedScales[0].startFrame){const t=this.animatedScales[0].fromScale;void 0!==t&&(this.scale=new r.Point(t[0]/100,t[1]/100))}if(this.animatedScales.some(i=>{if(i.startFrame===i.endFrame)return!1;if(i.startFrame<=t&&t<=i.endFrame){if(void 0===i.toScale)return!1;if(void 0===i.fromScale)return!1;const s=i.toScale[0]-i.fromScale[0],a=i.toScale[1]-i.fromScale[1],o=i.endFrame-i.startFrame,n=1*(t-i.startFrame)/o,h=i.easing(n),l=s*h+i.fromScale[0],c=a*h+i.fromScale[1];return this.scaleX=l/100,this.scaleY=c/100,this.scale=new r.Point(this.scaleX,this.scaleY),e=!0,!0}return!1}),!e&&t>this.animatedScales[this.animatedScales.length-1].endFrame){const t=this.animatedScales[this.animatedScales.length-2].toScale;void 0!==t&&(this.scale=new r.Point(t[0]/100,t[1]/100))}return e}hasAnimateProperty(){return this.hasAnimatedAnchorPoint||this.hasAnimatedOpacity||this.hasAnimatedPosition||this.hasAnimatedRotation||this.hasAnimatedScale||this.hasAnimatedSeparatedPosition}update(t){this.player&&this.player.update(t)}updateByDelta(t){this.deltaPlayer&&this.deltaPlayer.update(t)}updateWithFrameBySelfPlayer(t){this.__updateWithFrame(t)}updateWithFrame(t){this.player&&this.player.isPlaying&&this.player.stop(),this.deltaPlayer&&this.deltaPlayer.isPlaying&&this.deltaPlayer.stop(),this.__updateWithFrame(t)}__updateWithFrame(t){return this.inFrame<=t&&t<=this.outFrame?this.visible=!0:this.visible=!1,!this.visible||!this.hasAnimateProperty()||(this.hasAnimatedAnchorPoint&&this.animateAnchorPoint(t),this.hasAnimatedOpacity&&this.animateOpacity(t),this.hasAnimatedPosition&&this.animatePosition(t),this.hasAnimatedRotation&&this.animateRotation(t),this.hasAnimatedScale&&this.animateScale(t),this.hasAnimatedSeparatedPosition&&this.animateSeparatedPosition(t),!0)}play(t){this.player&&this.player.play(t),this.deltaPlayer&&this.deltaPlayer.play(t)}pause(){this.player&&this.player.pause(),this.deltaPlayer&&this.deltaPlayer.pause()}resume(){this.player&&this.player.resume(),this.deltaPlayer&&this.deltaPlayer.resume()}stop(){this.player&&this.player.stop(),this.deltaPlayer&&this.deltaPlayer.stop()}}e.Element=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(1);e.Element=s.Element;var a=i(13);e.ElementFactory=a.default;var r=i(6);e.ElementFinder=r.default;var o=i(7);e.ElementPlayer=o.default;var n=i(8);e.ElementDeltaPlayer=n.default;var h=i(3);e.MaskElement=h.default},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(0)),r=i(9),o={NONE:0,ADDITIVE:1,SUBTRACT:2,LIGHTEN:3,DARKEN:4,DIFFERENCE:5};class n extends r.ShapeElement{constructor(t){super(null,0,0,0),this.maskShapePaths=t.masksProperties.map(t=>this.createPath(t.pt.k));const e=t.masksProperties[0];this.isMaskLayer=!0,this.maskTargetLayer=t,this.isClosed=e.cl,this.isInvertedMask=e.inv,this.maskMode=n.toMaskMode(e.mode),this.setBlendModeByMaskMode(this.maskMode),this.inFrame=t.inFrame,this.outFrame=t.outFrame,this.setupOpacity(e.o),this.fillColorHex="0x000000",this.fillRGBA={enabled:!0}}setBlendModeByMaskMode(t){switch(t){case o.ADDITIVE:this.blendMode=a.BLEND_MODES.ADD;break;case o.SUBTRACT:break;case o.LIGHTEN:this.blendMode=a.BLEND_MODES.LIGHTEN;break;case o.DARKEN:this.blendMode=a.BLEND_MODES.DARKEN;break;case o.DIFFERENCE:this.blendMode=a.BLEND_MODES.DIFFERENCE}}static toMaskMode(t){let e=o.ADDITIVE;switch(t){case"n":e=o.NONE;break;case"a":e=o.ADDITIVE;break;case"s":e=o.SUBTRACT;break;case"l":e=o.LIGHTEN;break;case"d":e=o.DARKEN;break;case"f":e=o.DIFFERENCE}return e}updateAnimationFrameByBaseFrame(t){super.updateAnimationFrameByBaseFrame(t),this.maskShapePaths&&this.maskShapePaths.forEach(e=>{e.hasAnimatedPath&&e.paths&&e.paths.forEach(e=>{e.startFrame+=t,e.endFrame+=t})})}drawMask(t,e){let i=!1;if(e.hasAnimatedPath){this.isClosed=e.isClosed||!1;const s=e.paths;if(!s)return i;t<s[0].startFrame&&(this.drawPath(s[0].fromPath),this.isInvertedMask&&this.addHole(),i=!0),s.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(!e.fromPath)return!1;const s=n.createAnimatePath(e,t);return this.drawPath(s),this.isInvertedMask&&this.addHole(),i=!0,!0}return!1});const a=s[s.length-2];a.endFrame<=t&&(this.drawPath(a.toPath),this.isInvertedMask&&this.addHole(),i=!0)}else this.inFrame<=t&&t<=this.outFrame&&(this.isClosed=e.isClosed||!1,this.drawPath(e),this.isInvertedMask&&this.addHole(),i=!0);return i}setupScreenSize(){const t=this.root();t&&(this.screenWidth=t.width,this.screenHeight=t.height)}drawAllMask(t){let e=!1;if(this.inFrame<=t&&t<=this.outFrame&&this.isInvertedMask){this.screenWidth&&this.screenHeight||this.setupScreenSize(),this.beforeDraw();const t=-this.screenWidth/2,i=-this.screenHeight/2,s=2*this.screenWidth,a=2*this.screenHeight;this.moveTo(t,i),this.lineTo(t+s,i),this.lineTo(t+s,i+a),this.lineTo(t,i+a),this.afterDraw(),e=!0}return this.maskShapePaths.forEach(i=>{this.drawMask(t,i)&&(e=!0)}),e}__updateWithFrame(t){return this.maskMode!==o.NONE&&(this.clear(),this.drawAllMask(t))}}e.MaskElement=n},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(0)),r=s(i(2)),o=i(3),n=i(11);class h extends a.Container{constructor(){super(),this.finder=new r.ElementFinder}static fromJSONPath(t,e){return(new n.AEDataLoader).loadJSON(t).then(t=>{const i=new h;return i.setup(t,e||{}),i})}static fromData(t,e){const i=new h;return i.setup(t,e||{}),i}setup(t,e){this.width=t.w,this.height=t.h,this.inFrame=t.ip,this.outFrame=t.op,this.frameRate=t.fr,this.version=t.v,this.layers=t.layers,this.textures=t.assets.filter(t=>!!t.texture).map(t=>t.texture),this.textureCacheIds=this.textures.filter(t=>t.textureCacheIds&&t.textureCacheIds.length>0).map(t=>t.textureCacheIds[0]),this.player=new r.ElementPlayer(this.frameRate,this.inFrame,this.outFrame,t=>{this.updateWithFrame(t)},()=>{this.emit("completed",this)}),this.deltaPlayer=new r.ElementDeltaPlayer(this.frameRate,this.inFrame,this.outFrame,t=>{this.updateWithFrame(t)},()=>{this.emit("completed",this)}),Object.keys(e).forEach(t=>{this[t]=e[t]});const i={};this.layers.forEach(t=>{i[t.index]=t}),this.layers.reverse().forEach(t=>{if(t.frameRate=this.frameRate,t.opt=e,t.hasMask){this.masks||(this.masks=[]);const e=new o.MaskElement(t);this.addChild(t),t.addChild(e),this.masks.push({maskTargetLayer:t,maskLayer:e})}else if(t.hasParent){i[t.parentIndex].addChild(t)}else this.addChild(t)}),this.player.showFirstFrame(),this.deltaPlayer.showFirstFrame()}find(t){return this.finder.findByName(t,this)}updateMask(t){this.masks.forEach(e=>{const i=e.maskLayer.__updateWithFrame(t);e.maskTargetLayer.mask=i?e.maskLayer:null})}update(t){this.layers&&(this.player.update(t),this.layers.forEach(e=>{e.update(t)}))}updateByDelta(t){this.layers&&(this.deltaPlayer.update(t),this.layers.forEach(e=>{e.updateByDelta(t)}))}updateWithFrame(t){this.masks&&this.updateMask(t),this.noreplay?this.layers=this.layers.filter(e=>e.outFrame<t?(this.removeChild(e),e.destroy(),!1):(e.updateWithFrame(t),!0)):this.layers.forEach(e=>{e.updateWithFrame(t)})}play(t){this.player.play(t),this.deltaPlayer.play(t)}pause(){this.player.pause(),this.deltaPlayer.pause()}resume(){this.player.resume(),this.deltaPlayer.resume()}stop(){this.player.stop(),this.deltaPlayer.stop()}}e.AfterEffects=h},function(t,e){var i=4,s=.001,a=1e-7,r=10,o=11,n=1/(o-1),h="function"==typeof Float32Array;function l(t,e){return 1-3*e+3*t}function c(t,e){return 3*e-6*t}function m(t){return 3*t}function d(t,e,i){return((l(e,i)*t+c(e,i))*t+m(e))*t}function u(t,e,i){return 3*l(e,i)*t*t+2*c(e,i)*t+m(e)}function p(t){return t}t.exports=function(t,e,l,c){if(!(0<=t&&t<=1&&0<=l&&l<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&l===c)return p;for(var m=h?new Float32Array(o):new Array(o),f=0;f<o;++f)m[f]=d(f*n,t,l);function y(e){for(var h=0,c=1,p=o-1;c!==p&&m[c]<=e;++c)h+=n;var f=h+(e-m[--c])/(m[c+1]-m[c])*n,y=u(f,t,l);return y>=s?function(t,e,s,a){for(var r=0;r<i;++r){var o=u(e,s,a);if(0===o)return e;e-=(d(e,s,a)-t)/o}return e}(e,f,t,l):0===y?f:function(t,e,i,s,o){var n,h,l=0;do{(n=d(h=e+(i-e)/2,s,o)-t)>0?i=h:e=h}while(Math.abs(n)>a&&++l<r);return h}(e,h,h+n,t,l)}return function(t){return 0===t?0:1===t?1:d(y(t),e,c)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{findByName(t,e){return this.__findByName(t,e)}__findByName(t,e){const i=[];return e.name===t&&i.push(e),e.children.forEach(e=>{this.__findByName(t,e).forEach(t=>{i.push(t)})}),i}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,s,a){this.frameRate=t,this.inFrame=e,this.outFrame=i,this.isLoop=!1,this.isCompleted=!1,this.updater=s,this.completed=a}showFirstFrame(){this.updater(0)}update(t){if(0===this.frameRate)return;if(!this.isPlaying)return;if(this.firstTime||(this.firstTime=t),this.isCompleted)return;this.nowTime=t;const e=t-this.firstTime;let i=this.inFrame+e*this.frameRate/1e3;if(i>this.outFrame){if(i=this.outFrame-.01,!this.isLoop)return this.isCompleted=!0,void(this.completed&&this.completed());this.firstTime=t}this.updater(i)}play(t){this.isLoop=t||!1,this.firstTime=null,this.isCompleted=!1,this.isPlaying=!0}pause(){this.isPlaying=!1}resume(){const t=this.nowTime-(this.firstTime||0),e=performance.now();this.firstTime=e-t,this.isPlaying=!0}stop(){this.firstTime=null,this.isCompleted=!0,this.isPlaying=!1,this.showFirstFrame()}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,i,s,a){this.frameRate=t,this.inFrame=e,this.outFrame=i,this.isLoop=!1,this.isCompleted=!1,this.updater=s,this.completed=a}showFirstFrame(){this.updater(0)}update(t){if(0===this.frameRate)return;if(!this.isPlaying)return;if(this.elapsedTime||(this.elapsedTime=0),this.isCompleted)return;this.elapsedTime+=t;let e=this.inFrame+this.elapsedTime*this.frameRate/1e3;if(e>this.outFrame){if(e=this.outFrame-.01,!this.isLoop)return this.isCompleted=!0,void(this.completed&&this.completed());this.elapsedTime=0}this.updater(e)}play(t){this.isLoop=t||!1,this.isCompleted=!1,this.isPlaying=!0}pause(){this.isPlaying=!1}resume(){this.isPlaying=!0}stop(){this.isCompleted=!0,this.isPlaying=!1,this.elapsedTime=0,this.showFirstFrame()}}},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(i(0)),o=a(i(5)),n=i(1),h=a(i(10));class l extends n.Element{constructor(t,e,i,s){super(),t&&(this.name=t.nm,this.type=t.ty,this.inFrame=e,this.outFrame=i,this.startTime=s,this.beginProcess=h.default.select(()=>{},()=>{this.beginHole()}),this.endProcess=h.default.select(()=>{this.graphicsData.length<=1||this.addHole()},()=>{this.endHole()}),t.it?this.setupShapeIteration(t.it):this.setupShapeByType(t),this.drawThis(0))}setupShapeByType(t){switch(t.ty){case"sh":this.setupPath(t);break;case"st":this.setupStroke(t);break;case"tm":this.setupTrim(t);break;case"rc":this.setupRect(t);break;case"el":this.setupEllipse(t);break;case"fl":this.setupFill(t);break;case"tr":this.setupProperties(t)}}setupShapeIteration(t){t.forEach(t=>{this.setupShapeByType(t)}),this.shapePaths&&this.shapePaths.reverse()}setupPath(t){this.shapePaths||(this.shapePaths=[]),this.shapePaths.push({isClosed:t.closed,name:t.nm,path:this.createPath(t.ks.k)})}setupStroke(t){this.stroke={lineCap:t.lc,lineJoin:t.lj,miterLimit:t.ml,opacity:t.o.k,width:t.w.k,color:l.createColor(t.c),enabledFill:t.fillEnabled}}setupTrim(t){this.trim={m:t.m,o:t.o,name:t.nm,start:l.createTrim(t.s.k),end:l.createTrim(t.e.k)},this.trim.start.length>0&&(this.trim.enabledAnimation=!0)}static createTrim(t){return"number"==typeof t?t:l.createTrimAnimation(t)}static createTrimEasing(t){return t.i&&t.o?o.default(t.o.x[0],t.o.y[0],t.i.x[0],t.i.y[0]):t=>t}static createTrimAnimation(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:l.createTrimEasing(i),fromRatio:i.s?i.s[0]:null,toRatio:i.e?i.e[0]:null}})}setupRect(t){this.rects||(this.rects=[]);const e={name:t.nm,direction:t.d,position:l.createPosition(t.p),size:l.createSize(t.s)},i=e.position,s=e.size;(i.length>0||s.length>0)&&(e.enabledAnimation=!0),this.rects.push(e)}setupEllipse(t){this.ellipses||(this.ellipses=[]);const e={direction:t.d,position:l.createPosition(t.p),size:l.createSize(t.s)},i=e.position,s=e.size;(i.length>0||s.length>0)&&(e.enabledAnimation=!0),this.ellipses.push(e)}static createSize(t){return l.createPosition(t)}static createColor(t){return"number"==typeof t.k[0]?l.rgbArrayToHex(t.k):l.createAnimatedColor(t.k)}static createColorEasing(t){return t.i&&t.o?o.default(t.o.x,t.o.y,t.i.x,t.i.y):t=>t}static createAnimatedColor(t){const e=t.length-1;return t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:l.createColorEasing(i),fromColor:i.s?l.rgbArrayToHex(i.s):"0x000000",toColor:i.e?l.rgbArrayToHex(i.e):"0x000000"}})}static createPathEasing(t){return t.i&&t.o?o.default(t.o.x,t.o.y,t.i.x,t.i.y):t=>t}createPathByAnimation(t){const e=t.length-1;return{moveTo:new r.Point(0,0),bezierCurveToPaths:[],hasAnimatedPath:!0,paths:t.map((i,s)=>{return{name:i.n,startFrame:i.t,endFrame:e>s?t[s+1].t:i.t,easing:l.createPathEasing(i),fromPath:i.s?this.createPath(i.s[0]):null,toPath:i.e?this.createPath(i.e[0]):null}})}}createPath(t){if(!t.v)return this.createPathByAnimation(t);const e=JSON.parse(JSON.stringify(t)),i={moveTo:new r.Point(0,0),bezierCurveToPaths:[]};return e.v.forEach((t,s)=>{if(e.i[s][0]+=e.v[s][0],e.i[s][1]+=e.v[s][1],e.o[s][0]+=e.v[s][0],e.o[s][1]+=e.v[s][1],0===s)return;const a=e.o[s-1],o=e.i[s],n=e.v[s];1===s&&(i.moveTo=new r.Point(e.v[0][0],e.v[0][1])),i.bezierCurveToPaths.push({cp:new r.Point(a[0],a[1]),cp2:new r.Point(o[0],o[1]),to:new r.Point(n[0],n[1])})}),i.bezierCurveToPaths.push({cp:new r.Point(e.o[e.v.length-1][0],e.o[e.v.length-1][1]),cp2:new r.Point(e.i[0][0],e.i[0][1]),to:new r.Point(e.v[0][0],e.v[0][1])}),i}setupFill(t){this.fillRGBA={color:l.createColor(t.c),enabled:!0,name:t.nm,opacity:l.createOpacity(t.o)}}static rgbArrayToHex(t){return l.rgbToHex(t[0],t[1],t[2])}static rgbToHex(t,e,i){const s=l.toHex;return`0x${s(t)}${s(e)}${s(i)}`}static toHex(t){t<=1&&(t*=255,t=Math.floor(t));const e=t.toString(16);return 1===e.length?`0${e}`:e}updateAnimationFrameByBaseFrame(t){super.updateAnimationFrameByBaseFrame(t),this.shapePaths&&(this.shapePaths.forEach(e=>{e.path.hasAnimatedPath&&e.path.paths&&e.path.paths.forEach(e=>{e.startFrame+=t,e.endFrame+=t})}),this.ellipses&&this.ellipses.forEach(e=>{if(!e.enabledAnimation)return;const i=e.size;i.length>0&&i.forEach(e=>{e.startFrame+=t,e.endFrame+=t});const s=e.position;s.length>0&&s.forEach(e=>{e.startFrame+=t,e.endFrame+=t})}),this.rects&&this.rects.forEach(e=>{if(!e.enabledAnimation)return;const i=e.size;i.length>0&&i.forEach(e=>{e.startFrame+=t,e.endFrame+=t});const s=e.position;s.length>0&&s.forEach(e=>{e.startFrame+=t,e.endFrame+=t})}))}drawPathForMask(t){const e=t.moveTo;this.moveTo(e.x,e.y),t.bezierCurveToPaths.forEach(t=>{this.bezierCurveTo(t.cp.x,t.cp.y,t.cp2.x,t.cp2.y,t.to.x,t.to.y)}),this.closePath()}beforeDraw(){this.stroke?(this.stroke.enabledFill&&this.strokeColorHex?this.beginFill(parseInt(this.strokeColorHex,16)):this.fillRGBA&&this.fillColorHex&&this.beginFill(parseInt(this.fillColorHex,16)),this.strokeColorHex&&this.lineStyle(this.stroke.width,parseInt(this.strokeColorHex,16))):this.fillRGBA&&this.fillColorHex&&(this.fillRGBA.enabled?this.beginFill(parseInt(this.fillColorHex,16)):this.lineStyle(2,parseInt(this.fillColorHex,16)))}afterDraw(){this.isClosed&&(this.stroke?this.stroke.enabledFill?this.endFill():this.fillRGBA?this.endFill():this.closePath():this.fillRGBA&&(this.fillRGBA.enabled?this.endFill():this.closePath()))}drawPath(t){this.beforeDraw(),this.moveTo(t.moveTo.x,t.moveTo.y),t.bezierCurveToPaths.forEach(t=>{this.bezierCurveTo(t.cp.x,t.cp.y,t.cp2.x,t.cp2.y,t.to.x,t.to.y)}),this.afterDraw()}static createAnimatePos(t,e,i,s){const a=t.endFrame-t.startFrame,o=1*(e-t.startFrame),n=s.x-i.x,h=s.y-i.y,l=o/a,c=t.easing(l),m=n*c+i.x,d=h*c+i.y;return new r.Point(m,d)}static createAnimatePath(t,e){const i=t.fromPath,s=t.toPath;return{moveTo:l.createAnimatePos(t,e,i.moveTo,s.moveTo),bezierCurveToPaths:i.bezierCurveToPaths.map((a,r)=>{const o=i.bezierCurveToPaths[r],n=s.bezierCurveToPaths[r];return{cp:l.createAnimatePos(t,e,o.cp,n.cp),cp2:l.createAnimatePos(t,e,o.cp2,n.cp2),to:l.createAnimatePos(t,e,o.to,n.to)}})}}setupStrokeColor(t){if(this.stroke)if("string"!=typeof this.stroke.color){const e=this.stroke.color[0];if(t<e.startFrame)return void(this.strokeColorHex=e.fromColor);this.stroke.color.forEach(e=>{e.startFrame<=t&&t<=e.endFrame&&(this.strokeColorHex=e.fromColor)});const i=this.stroke.color[this.stroke.color.length-2];t>i.endFrame&&(this.strokeColorHex=i.fromColor)}else this.strokeColorHex=this.stroke.color}setupFillColor(t){if(this.fillRGBA)if("string"!=typeof this.fillRGBA.color){const e=this.fillRGBA.color,i=e[0];if(t<i.startFrame)return void(this.fillColorHex=i.fromColor);e.forEach(e=>{e.startFrame<=t&&t<=e.endFrame&&(this.fillColorHex=e.fromColor)});const s=e[e.length-2];t>s.endFrame&&(this.fillColorHex=s.toColor)}else this.fillColorHex=this.fillRGBA.color}static createShapePosition(t,e){const i=e.position;if(i.length>0){let e=null;i.forEach(i=>{if(i.toPosition&&i.fromPosition&&i.startFrame<=t&&t<=i.endFrame){const s=i.toPosition[0]-i.fromPosition[0],a=i.toPosition[1]-i.fromPosition[1],o=i.endFrame-i.startFrame,n=1*(t-i.startFrame)/o,h=i.easing(n),l=s*h+i.fromPosition[0],c=a*h+i.fromPosition[1];e=new r.Point(l,c)}});const s=i[i.length-2];return t>s.endFrame&&s.toPosition&&(e=new r.Point(s.toPosition[0],s.toPosition[1])),e}return e.position}static createShapeSize(t,e){const i=e.size;if(i.length>0){let e=null;i.forEach(i=>{if(i.toPosition&&i.fromPosition&&i.startFrame<=t&&t<=i.endFrame){const s=i.toPosition[0]-i.fromPosition[0],a=i.toPosition[1]-i.fromPosition[1],o=i.endFrame-i.startFrame,n=1*(t-i.startFrame)/o,h=i.easing(n),l=s*h+i.fromPosition[0],c=a*h+i.fromPosition[1];e=new r.Point(l,c)}});const s=i[i.length-2];return t>s.endFrame&&s.toPosition&&(e=new r.Point(s.toPosition[0],s.toPosition[1])),e}return e.size}drawEllipseAnimation(t,e){const i=l.createShapePosition(t,e),s=l.createShapeSize(t,e);i&&s&&this.drawEllipse(i.x,i.y,s.x/2,s.y/2)}drawRectAnimation(t,e){const i=l.createShapePosition(t,e),s=l.createShapeSize(t,e);i&&s&&this.drawRect(i.x,i.y,s.x,s.y)}drawTrim(t){if(!this.trim.enabledAnimation)return this.beforeDraw(),this.shapePaths.forEach(t=>{const e=t.path,i=e.moveTo,s=e.bezierCurveToPaths[0],a=s.to.x-i.x,r=s.to.y-i.y,o=this.trim.start,n=this.trim.end,h=i.x+a*o/100,l=i.y+r*o/100,c=i.x+a*n/100,m=i.y+r*n/100;this.moveTo(h,l),this.lineTo(c,m)}),void this.afterDraw();const e=this.trim.start,i=this.trim.end;if(t<e[0].startFrame&&t<i[0].startFrame)return;let s=0;e.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(null===e.toRatio)return!1;if(null===e.fromRatio)return!1;const i=e.toRatio-e.fromRatio,a=e.endFrame-e.startFrame,r=t-e.startFrame;return s=r*(1*i/a)+e.fromRatio,!0}return!1});let a=e[e.length-2];a.endFrame<=t&&(s=a.toRatio);let r=0;if(i.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(null===e.toRatio)return!1;if(null===e.fromRatio)return!1;const i=e.toRatio-e.fromRatio,s=e.endFrame-e.startFrame,a=t-e.startFrame;return r=a*(1*i/s)+e.fromRatio,!0}return!1}),(a=i[i.length-2]).endFrame<=t&&(r=a.toRatio),s>r){const t=s;s=r,r=t}this.beforeDraw(),this.shapePaths.forEach(t=>{const e=t.path,i=e.moveTo,a=e.bezierCurveToPaths[0],o=a.to.x-i.x,n=a.to.y-i.y,h=i.x+o*s/100,l=i.y+n*s/100,c=i.x+o*r/100,m=i.y+n*r/100;this.moveTo(h,l),this.lineTo(c,m)}),this.afterDraw()}drawShapePath(t,e,i){if(e.path.hasAnimatedPath){this.isClosed=e.isClosed;const s=e.path.paths;if(!s)return;t<s[0].startFrame&&(0!==i&&this.beginProcess(),this.drawPath(s[0].fromPath),0!==i&&this.endProcess()),s.some(e=>{if(e.startFrame===e.endFrame)return!1;if(e.startFrame<=t&&t<=e.endFrame){if(null===e.fromPath)return!1;0!==i&&this.beginProcess();const s=l.createAnimatePath(e,t);return this.drawPath(s),0!==i&&this.endProcess(),!0}return!1});const a=s[s.length-2];a.endFrame<=t&&(0!==i&&this.beginProcess(),this.drawPath(a.toPath),0!==i&&this.endProcess())}else this.inFrame<=t&&t<=this.outFrame&&(0!==i&&this.beginProcess(),this.isClosed=e.isClosed,this.drawPath(e.path),0!==i&&this.endProcess())}drawShapePaths(t){this.shapePaths.forEach((e,i)=>{this.drawShapePath(t,e,i)})}drawThis(t){this.clear(),this.setupStrokeColor(t),this.setupFillColor(t),this.trim?this.drawTrim(t):this.shapePaths&&this.drawShapePaths(t),this.ellipses&&(this.beforeDraw(),this.ellipses.forEach(e=>{if(e.enabledAnimation)this.drawEllipseAnimation(t,e);else{const t=e.position,i=e.size;this.drawEllipse(t.x,t.y,i.x/2,i.y/2)}}),this.afterDraw()),this.rects&&(this.beforeDraw(),this.rects.forEach(e=>{if(e.enabledAnimation)this.drawRectAnimation(t,e);else{const t=e.position,i=e.size;this.drawRect(t.x,t.y,i.x,i.y)}}),this.afterDraw())}__updateWithFrame(t){return super.__updateWithFrame(t),this.drawThis(t),!0}}e.ShapeElement=l;e.default=class extends n.Element{constructor(t){super(t),t.bounds?this.setupBounds(t.bounds):(this.width=0,this.height=0),this.shapes=t.shapes.map(t=>new l(t,this.inFrame,this.outFrame,this.startTime)),this.shapes.forEach(t=>{this.scaleX&&this.scaleY&&(t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.scale=new r.Point(this.scaleX,this.scaleY)),this.addChild(t)})}destroy(t){this.children.concat().forEach(e=>{e.destroy(t),this.removeChild(e)})}set frameRate(t){super.frameRate=t,this.children.forEach(e=>{e.frameRate=t})}set opt(t){super.opt=t,this.children.forEach(e=>{e.opt=t})}updateAnimationFrameByBaseFrame(t){super.updateAnimationFrameByBaseFrame(t),this.shapes.forEach(e=>{e.inFrame+=t,e.outFrame+=t,e.updateAnimationFrameByBaseFrame(t)})}setupBounds(t){this.width=t.r-t.l,this.height=t.b-t.t,this.bounds={top:t.t,bottom:t.b,left:t.l,right:t.r}}__updateWithFrame(t){return super.__updateWithFrame(t),this.noreplay?this.children.concat().forEach(e=>{const i=e;return i.outFrame<t?(this.removeChild(i),i.destroy(),!1):(i.__updateWithFrame(t),!0)}):this.children.forEach(e=>{e.__updateWithFrame(t)}),!0}}},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a={version:s(i(0)).VERSION,semanticVersion(){const t=this.version.match(/([0-9]+)\.([0-9]+)\.([0-9]+)/);return!t||t.length<3?{major:0,minor:0,patch:0}:{major:parseInt(t[1],10),minor:parseInt(t[2],10),patch:parseInt(t[3],10)}},major(){return this.semanticVersion().major},minor(){return this.semanticVersion().minor},patch(){return this.semanticVersion().patch},isV4(){return 4===this.major()},isV5(){return 5===this.major()},select(t,e){return this.isV4()&&void 0!==t?t:this.isV5()&&void 0!==e?e:()=>{}}};e.default=a},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=s(i(0)),o=s(i(2)),n=i(18),h=a(i(10));class l{constructor(){this.imagePathProxy=t=>t,this.createImageLoader=h.default.select(t=>new r.loaders.Loader("",t.length),t=>new r.Loader("",t.length))}loadJSON(t){return new Promise((e,i)=>{fetch(t).then(t=>t.json()).then(s=>{if(!s)return i();const a=s;return this.load(a,t,null).then(()=>{e(a)}).catch(t=>{i(t)})})})}loadJSONWithInterceptor(t,e){return new Promise((i,s)=>e?fetch(t).then(t=>t.json()).then(a=>{const r=a;return this.load(r,t,e).then(()=>{i(r)}).catch(t=>{s(t)})}):s(new Error("required interceptor parameter")))}static loadLayers(t,e){return t.layers.map(t=>(e&&e.intercept(t),o.ElementFactory.create(t))).filter(t=>null!==t)}loadAssets(t,e,i){const s=e.split("/").slice(0,-1).join("/"),a=t.assets.map(t=>(i&&i.intercept(t),new n.Asset(this,t,s))),r=a.filter(t=>!!t.imagePath);return 0===r.length?new Promise(t=>t(a)):this.loadImages(r).then(()=>a)}loadImages(t){return new Promise((e,i)=>{const s=this.createImageLoader(t),a=t.filter(t=>!s.resources[t.imagePath]);return 0===a.length?(t.forEach(t=>{t.texture=s.resources[t.imagePath].texture}),e()):(a.forEach(t=>{s.add(t.imagePath,t.imagePath)}),s.onError.add(t=>{i(t)}),s.load((i,s)=>{t.forEach(t=>t.texture=s[t.imagePath].texture),e()}))})}static resolveReference(t,e){const i={};e.forEach(t=>{i[t.id]=t}),t.forEach(t=>{t.isCompType()?t.setupReference(i):t.isImageType()&&t.setupImage(i)})}load(t,e,i){return this.loadAssets(t,e,i).then(e=>{const s=l.loadLayers(t,i);l.resolveReference(s,e),t.assets=e,t.layers=s})}}e.AEDataLoader=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(4),a=i(11),r=i(19);window.PIXI.AfterEffects=s.AfterEffects,window.PIXI.AEDataLoader=a.AEDataLoader,window.PIXI.AEDataInterceptor=r.AEDataInterceptor},function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(1),r=s(i(14)),o=s(i(15)),n=s(i(16)),h=s(i(17)),l=s(i(9)),c={COMP:0,SOLID:1,IMAGE:2,NULL:3,SHAPE:4,TEXT:5,VIDEO:9,CAMERA:13};e.default=class{static create(t){let e=null;switch(t.ty){case c.COMP:e=new r.default(t);break;case c.SOLID:e=new n.default(t);break;case c.IMAGE:e=new o.default(t);break;case c.SHAPE:e=new l.default(t);break;case c.TEXT:e=new h.default(t);break;case c.CAMERA:break;case c.NULL:e=new r.default(t);break;case c.VIDEO:e=new a.Element(t)}return e}}},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(0)),r=i(1),o=i(3);e.default=class extends r.Element{constructor(t){super(t),t.w>0&&t.h>0&&(this.originWidth=t.w,this.originHeight=t.h,this.scale=new a.Point(this.scaleX,this.scaleY)),this.scaleX<0&&(this.scale.x=this.scaleX),this.clonedLayers=[],this.autoOriented=t.ao}allLayers(){let t=[];if(this.masks&&(t=t.concat(this.masks.map(t=>t.maskLayer))),this.layers)t=t.concat(this.layers);else{const e=this.children.map(t=>t instanceof r.Element?t:null).filter(t=>null!==t);t=t.concat(e)}return t.concat(this.clonedLayers)}set frameRate(t){super.frameRate=t,this.allLayers().forEach(e=>e.frameRate=t)}set opt(t){super.opt=t,this.allLayers().forEach(e=>e.opt=t)}addMaskLayer(t){if(!t.hasMask)return;this.masks||(this.masks=[]);const e=new o.MaskElement(t);e.updateAnimationFrameByBaseFrame(this.startTime||0),t.addChild(e),t.maskLayer=e,this.masks.push({maskTargetLayer:t,maskLayer:e})}setupTrackMatteLayer(t,e){e.isInvertedMask=t.isInvertTrackMatteType(),e.alpha=0,t.maskLayer=e,t.addChild(e),this.masks||(this.masks=[]),this.masks.push({maskTargetLayer:t,maskLayer:e})}setupReference(t){if(!this.referenceId)return;const e=t[this.referenceId];e&&(this.layers=e.createLayers(),this.layers.forEach(t=>{t.inFrame+=this.startTime,t.outFrame+=this.startTime,t.startTime+=this.startTime,t.updateAnimationFrameByBaseFrame(this.startTime||0)}),this.blendMode!==a.BLEND_MODES.NORMAL&&this.layers.forEach(t=>{t.blendMode=this.blendMode}),this.resolveLayerReference(this.layers,t,e),this.layers.forEach((t,e)=>{if(!t.hasParent){if(t.hasTrackMatteType){const i=this.layers[e+1];this.setupTrackMatteLayer(t,i)}else this.addMaskLayer(t);t.isTrackMatteData||this.addChild(t)}}),this.clonedLayers.forEach(t=>{t.inFrame+=this.startTime,t.outFrame+=this.startTime,t.startTime+=this.startTime,t.updateAnimationFrameByBaseFrame(this.startTime||0),this.addChild(t)}))}createParentLayer(t,e){if(!t.hasParent)return null;const i=e.createLayerByIndex(t.parentIndex);if(!i)return null;i.shapes&&(i.shapes.forEach(t=>{const e=t.parent;e&&e.removeChild(t)}),i.shapes=[],i.inFrame=t.inFrame,i.outFrame=t.outFrame),this.addMaskLayer(t),i.addChild(t);const s=this.createParentLayer(i,e);return s?(s.addChild(i),s):i}resolveLayerReference(t,e,i){t.sort((t,e)=>t.index<e.index?-1:t.index>e.index?1:0),t.reverse().forEach(t=>{const e=this.createParentLayer(t,i);e&&this.clonedLayers.push(e)}),t.forEach(t=>{t.isCompType()?t.setupReference(e):t.isImageType()&&t.setupImage(e)})}updateMask(t){this.masks.forEach(e=>{let i=e.maskLayer;i.isTrackMatteData&&i.maskLayer&&(i=i.maskLayer);const s=i.__updateWithFrame(t);e.maskTargetLayer.mask=s?i:null})}updateNotLayers(t){this.alpha=1,this.noreplay?this.children.concat().forEach(e=>{if(e instanceof r.Element){if(e.outFrame<t)return this.removeChild(e),void e.destroy();e.__updateWithFrame(t)}}):this.children.forEach(e=>{e instanceof r.Element&&e.__updateWithFrame(t)})}updateLayers(t){this.noreplay?this.layers=this.layers.filter(e=>e.outFrame<t?(this.removeChild(e),e.destroy(),!1):(e.__updateWithFrame(t),!0)):this.layers.forEach(e=>{e.__updateWithFrame(t)})}updateClonedLayers(t){this.noreplay?this.clonedLayers=this.clonedLayers.filter(e=>e.outFrame<t?(this.removeChild(e),e.destroy(),!1):(e.__updateWithFrame(t),e.visible=!0,!0)):this.clonedLayers.forEach(e=>{e.__updateWithFrame(t),e.visible=!0})}__updateWithFrame(t){return super.__updateWithFrame(t),this.masks&&this.updateMask(t),this.layers?this.updateLayers(t):this.updateNotLayers(t),this.updateClonedLayers(t),!0}}},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(0)),r=i(1);e.default=class extends r.Element{constructor(t){super(t),t.bmPIXI&&(this.blendMode=t.bmPIXI),t.image&&(this.image=t.image,this.blendMode!==a.BLEND_MODES.NORMAL&&(this.image.blendMode=this.blendMode),this.addChild(this.image))}setupImage(t){if(this.image)return;if(!this.referenceId)return;const e=t[this.referenceId];e&&(e.blendMode&&(this.blendMode=e.blendMode),this.image=new a.Sprite(e.texture),this.image.blendMode=this.blendMode,this.addChild(this.image))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i(1);e.default=class extends s.Element{constructor(t){super(t),this.color=t.sc||"",this.colorNumber=t.sc||0,this.sw=t.sw||0,this.sh=t.sh||0,this.color.startsWith("#")&&(this.color=`0x${this.color.substr(1)}`,this.colorNumber=parseInt(this.color,16))}__updateWithFrame(t){return super.__updateWithFrame(t),this.clear(),this.beginFill(this.colorNumber,this.opacity),this.drawRect(0,0,this.sw*this.scaleX,this.sh*this.scaleY),this.endFill(),!0}}},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(0)),r=i(1),o={LEFT:0,RIGHT:1,CENTER:2},n={};n[o.LEFT]="left",n[o.RIGHT]="right",n[o.CENTER]="center";class h extends r.Element{constructor(t){if(super(t),t.text)return this.text=t.text,t.rawText&&(this.rawText=t.rawText,this.text.text=t.rawText),void this.addChild(this.text);if(t.t){const e=t.t.d.k[0].s;t.rawText&&(e.t=t.rawText),this.setupText(e)}}static toHex(t){t<=1&&(t*=255,t=Math.floor(t));const e=t.toString(16);return 1===e.length?`0${e}`:e}static toFontColor(t){return t.length>0?parseInt(`0x${this.toHex(t[0])}${this.toHex(t[1])}${this.toHex(t[2])}`,16):16777215}setupText(t){if(this.text)return;this.fontFamily=t.f,this.fontColor=h.toFontColor(t.fc),this.fontSize=t.s,this.rawText=t.t,this.baseLineHeight=t.lh,this.baseLineShift=t.ls,this.tracking=t.tr,this.justification=t.j,this.text=new a.Text(this.rawText,{fontFamily:this.fontFamily,fontSize:this.fontSize,fill:this.fontColor,align:n[this.justification]}),this.justification===o.LEFT?this.text.anchor.x=0:this.justification===o.RIGHT?this.text.anchor.x=1:this.justification===o.CENTER&&(this.text.anchor.x=.5);const e=this.baseLineHeight-this.fontSize;this.text.y-=this.text.height-e,this.addChild(this.text)}}e.default=h},function(t,e,i){"use strict";var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i(2));e.Asset=class{constructor(t,e,i){if(this.id=e.id,this.layers=e.layers||[],!e.isDisused){if(e.texture)this.texture=e.texture;else if(e.imagePath)this.imagePath=e.imagePath,t.imagePathProxy&&(this.imagePath=t.imagePathProxy(e.imagePath));else if(e.p){let s=[i,...e.u.split("/").filter(t=>""!==t),e.p].join("/");t.imagePathProxy&&(s=t.imagePathProxy(s)),this.imagePath=s}e.bmPIXI&&(this.blendMode=e.bmPIXI)}}createLayers(){return this.layers.map(t=>a.ElementFactory.create(t)).filter(t=>null!==t)}createLayerByIndex(t){const e=this.layers.filter(e=>e.ind===t);return 0===e.length?null:a.ElementFactory.create(e[0])}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.AEDataInterceptor=class{constructor(t){this.config=t}add(t,e){this.config||(this.config={}),this.config[t]=e}intercept(t){t.layers&&t.layers.forEach(t=>{this.intercept(t)});const e=this.config[t.nm]||this.config[t.p]||this.config[t.id];return e&&(e.text&&(t.text=e.text),e.rawText&&(t.rawText=e.rawText),e.image&&(t.image=e.image),e.imagePath&&(t.imagePath=e.imagePath),e.texture&&(t.texture=e.texture),e.isDisused&&(t.isDisused=e.isDisused),e.events&&(t.events=e.events),e.inPoint&&(t.ip=e.inPoint),e.outPoint&&(t.op=e.outPoint),e.blendMode&&(t.bmPIXI=e.blendMode)),t}}}]);
//# sourceMappingURL=pixi-ae.js.map